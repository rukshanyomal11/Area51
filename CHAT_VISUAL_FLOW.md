# ğŸ“Š Real-Time Chat System - Visual Flow Diagram

## ğŸ”„ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CUSTOMER SIDE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ‘¤ Customer Login
          â†“
    ğŸ  Account Page
          â†“
    ğŸ“¦ Order History
          â†“
    ğŸ’¬ Click Chat Icon (on product)
          â†“
    ğŸ”Œ Socket.IO Connection
          â†“
    ğŸ’­ ChatBox Component Opens
          â†“
    âœï¸  Type & Send Message
          â†“
    ğŸ“¡ Message â†’ Backend â†’ Socket.IO â†’ Admin
          â†“
    â³ Wait for Admin Reply
          â†“
    ğŸ“¨ Receive Real-time Response


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ADMIN SIDE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ”‘ Admin Login
          â†“
    ğŸ“Š Admin Dashboard
          â†“
    ğŸŸ£ Purple Chat Button (floating)
          â†“
    ğŸ”” Unread Badge (if new messages)
          â†“
    ğŸ–±ï¸  Click Chat Button
          â†“
    ğŸ“‹ Chat Sidebar Opens
          â†“
    ğŸ‘€ See All Customer Chats
          â†“
    ğŸ–±ï¸  Click on a Chat
          â†“
    ğŸ’­ ChatBox Opens
          â†“
    âœï¸  Type & Send Reply
          â†“
    ğŸ“¡ Message â†’ Backend â†’ Socket.IO â†’ Customer
          â†“
    âœ… Customer Receives Instantly
```

---

## ğŸ—ï¸ Component Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         App.jsx                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            AuthProvider (Authentication)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚      SocketProvider (Socket.IO Context)            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚          Routes                              â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚      Customer Routes               â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                     â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ AccountPage                     â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚    â””â”€â”€ OrderHistory                â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚         â””â”€â”€ ChatBox                â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚       Admin Routes                 â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                     â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ AdminDashboard                  â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚    â””â”€â”€ AdminChatButton (floating)  â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚         â””â”€â”€ AdminChatSidebar        â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚              â””â”€â”€ ChatBox            â”‚     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CUSTOMER   â”‚         â”‚    BACKEND   â”‚         â”‚    ADMIN     â”‚
â”‚   (Browser)  â”‚         â”‚   (Server)   â”‚         â”‚   (Browser)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚                         â”‚
       â”‚ 1. Create Chat         â”‚                         â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
       â”‚                         â”‚                         â”‚
       â”‚ 2. Chat Created        â”‚                         â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
       â”‚                         â”‚                         â”‚
       â”‚ 3. Send Message        â”‚                         â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
       â”‚                         â”‚                         â”‚
       â”‚                         â”‚ 4. Socket.IO Emit      â”‚
       â”‚                         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                         â”‚                         â”‚
       â”‚                         â”‚ 5. Admin Reply         â”‚
       â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                         â”‚                         â”‚
       â”‚ 6. Real-time Receive   â”‚                         â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
       â”‚                         â”‚                         â”‚
```

---

## ğŸ”Œ Socket.IO Events Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Socket.IO Event Flow                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Connects:
  Client â”€â”€â”€[user_connected]â”€â”€â”€> Server
                                    â”‚
                                    â”œâ”€â”€> Store in activeUsers Map
                                    â””â”€â”€> Broadcast to all: user_status_update

Join Chat:
  Client â”€â”€â”€[join_chat]â”€â”€â”€> Server
                               â”‚
                               â””â”€â”€> socket.join(chatId)

Send Message:
  Client â”€â”€â”€[send_message]â”€â”€â”€> Server
                                  â”‚
                                  â”œâ”€â”€> Save to Database
                                  â”œâ”€â”€> io.to(chatId).emit('receive_message')
                                  â””â”€â”€> io.emit('admin_notification')

Typing:
  Client â”€â”€â”€[typing]â”€â”€â”€> Server
                            â”‚
                            â””â”€â”€> socket.to(chatId).emit('user_typing')

Disconnect:
  Client â”€â”€â”€[disconnect]â”€â”€â”€> Server
                                â”‚
                                â”œâ”€â”€> Remove from activeUsers
                                â””â”€â”€> Broadcast: user_status_update
```

---

## ğŸ“Š Database Schema Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Chat Collection                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat Document                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  _id: ObjectId                                                   â”‚
â”‚  orderId: ObjectId â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  orderNumber: String     â”‚  Order Info                           â”‚
â”‚  userId: ObjectId â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚
â”‚  userName: String        â”‚  User Info                            â”‚
â”‚  productId: ObjectId â”€â”€â”€â”€â”¤                                       â”‚
â”‚  productName: String     â”‚  Product Info (optional)              â”‚
â”‚  status: "active"/"closed"                                       â”‚
â”‚  lastMessage: Date                                               â”‚
â”‚  unreadCount: {                                                  â”‚
â”‚    user: Number,                                                 â”‚
â”‚    admin: Number                                                 â”‚
â”‚  }                                                               â”‚
â”‚  messages: [                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Message Object                                 â”‚           â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚    â”‚  sender: ObjectId                              â”‚           â”‚
â”‚    â”‚  senderName: String                            â”‚           â”‚
â”‚    â”‚  senderRole: "user"/"admin"                    â”‚           â”‚
â”‚    â”‚  message: String                               â”‚           â”‚
â”‚    â”‚  timestamp: Date                               â”‚           â”‚
â”‚    â”‚  read: Boolean                                 â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  ]                                                               â”‚
â”‚  createdAt: Date                                                 â”‚
â”‚  updatedAt: Date                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI Component Tree

```
OrderHistory Component
â””â”€â”€ ğŸ“¦ Order Card
    â””â”€â”€ ğŸ›ï¸  Product Item
        â””â”€â”€ ğŸ’¬ Chat Icon Button
            â†“ (onClick)
            â””â”€â”€ ğŸ—¨ï¸  ChatBox Modal
                â”œâ”€â”€ ğŸ“‹ Header (Order #, Product)
                â”œâ”€â”€ ğŸ’­ Messages Area
                â”‚   â”œâ”€â”€ User Message (right, blue)
                â”‚   â”œâ”€â”€ Admin Message (left, white)
                â”‚   â””â”€â”€ Typing Indicator
                â””â”€â”€ âœï¸  Input Area (textarea + send button)


AdminDashboard Component
â””â”€â”€ ğŸŸ£ AdminChatButton (floating)
    â†“ (onClick)
    â””â”€â”€ ğŸ“‹ AdminChatSidebar (slides from right)
        â”œâ”€â”€ ğŸ”” Header (unread count)
        â”œâ”€â”€ ğŸ“œ Chat List
        â”‚   â””â”€â”€ Chat Item
        â”‚       â”œâ”€â”€ ğŸ‘¤ User Avatar
        â”‚       â”œâ”€â”€ ğŸ“¦ Order Number
        â”‚       â”œâ”€â”€ ğŸ›ï¸  Product Name
        â”‚       â”œâ”€â”€ ğŸ’¬ Last Message
        â”‚       â”œâ”€â”€ ğŸ• Timestamp
        â”‚       â””â”€â”€ ğŸ”´ Unread Badge
        â””â”€â”€ ğŸ”„ Refresh Button
            â†“ (onClick chat)
            â””â”€â”€ ğŸ—¨ï¸  ChatBox Modal (same as customer)
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Authentication & Access                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Login
  â†“
JWT Token Generated
  â†“
Stored in localStorage
  â†“
Include in API Headers
  â”‚
  â”œâ”€â”€> REST API: Authorization: Bearer {token}
  â”‚
  â””â”€â”€> Socket.IO: Emit user_connected with userId


Customer Access:
  â””â”€â”€ Can create chat for their own orders
  â””â”€â”€ Can send messages
  â””â”€â”€ Can see own chat history
  â””â”€â”€ Real-time updates via Socket.IO


Admin Access:
  â””â”€â”€ Can see ALL chats
  â””â”€â”€ Can reply to any customer
  â””â”€â”€ Receives notifications for new messages
  â””â”€â”€ Can close chats
  â””â”€â”€ Real-time updates via Socket.IO
```

---

## ğŸ“± Responsive Design Flow

```
Desktop (> 768px):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         Order History              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚  Product | Details | ğŸ’¬ Chatâ”‚  â”‚  â† Icon on right
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                    â”‚
  â”‚  [ChatBox: 600px wide, centered]   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile (< 768px):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Order History   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Product   â”‚  â”‚
  â”‚  â”‚ Details   â”‚  â”‚
  â”‚  â”‚ ğŸ’¬ Chat   â”‚  â”‚  â† Icon below
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                 â”‚
  â”‚ [ChatBox: Full] â”‚  â† Full screen
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Admin Sidebar:
  Desktop: 384px wide, slides from right
  Mobile: Full screen overlay
```

---

## ğŸš€ Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Optimization Strategy                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Socket.IO Connection:
   â””â”€â”€ Single connection per user
   â””â”€â”€ Reuse across components
   â””â”€â”€ Auto-reconnect on disconnect

2. Message Loading:
   â””â”€â”€ Load recent messages first
   â””â”€â”€ Lazy load older messages
   â””â”€â”€ Pagination for large chats

3. Real-time Updates:
   â””â”€â”€ Only join active chat rooms
   â””â”€â”€ Leave room when chat closes
   â””â”€â”€ Debounce typing indicators

4. Database Queries:
   â””â”€â”€ Index on userId, orderId
   â””â”€â”€ Index on lastMessage for sorting
   â””â”€â”€ Populate only needed fields

5. Unread Count:
   â””â”€â”€ Update locally on read
   â””â”€â”€ Periodic sync with server
   â””â”€â”€ Reset on chat open
```

---

## ğŸ¯ User Journey Map

```
CUSTOMER JOURNEY:
  1. ğŸ›ï¸  Place Order
  2. ğŸ“§ Receive Order Confirmation
  3. ğŸ  Login to Account
  4. ğŸ“¦ View Order History
  5. â“ Have Question about Product
  6. ğŸ’¬ Click Chat Icon
  7. âœï¸  Send Message
  8. â³ Wait for Response
  9. ğŸ“¨ Receive Admin Reply (Real-time!)
  10. âœ… Issue Resolved
  11. ğŸ˜Š Happy Customer

ADMIN JOURNEY:
  1. ğŸ”‘ Login to Admin Dashboard
  2. ğŸ”” See Unread Badge on Chat Button
  3. ğŸ–±ï¸  Click Chat Button
  4. ğŸ“‹ See All Customer Chats
  5. ğŸ‘€ Identify Urgent Chats
  6. ğŸ–±ï¸  Click on Chat
  7. ğŸ“– Read Customer Message
  8. ğŸ’¡ Understand Issue
  9. âœï¸  Send Helpful Reply
  10. âœ… Mark as Resolved
  11. ğŸ˜Š Satisfied Customer
```

---

## ğŸ”„ State Management

```
SocketContext State:
  â”œâ”€â”€ socket (Socket.IO instance)
  â”œâ”€â”€ isConnected (Boolean)
  â”œâ”€â”€ onlineUsers (Set)
  â””â”€â”€ Functions:
      â”œâ”€â”€ connectUser()
      â”œâ”€â”€ joinChat()
      â”œâ”€â”€ sendMessage()
      â””â”€â”€ sendTypingIndicator()

ChatBox State:
  â”œâ”€â”€ messages (Array)
  â”œâ”€â”€ newMessage (String)
  â”œâ”€â”€ isTyping (Boolean)
  â””â”€â”€ typingUser (String)

AdminChatSidebar State:
  â”œâ”€â”€ chats (Array)
  â”œâ”€â”€ selectedChat (Object)
  â””â”€â”€ unreadCount (Number)

OrderHistory State:
  â””â”€â”€ activeChat (Object)
```

This visual guide should help you understand how all the pieces fit together! ğŸ¨âœ¨
